# 魔法门6中文“完美”升级补丁

**本页面和补丁文件正在整理制作当中。**

## 简介

魔法门6中文“完美”升级补丁（mm6chup）大量修正了简体中文原版的翻译；同时也修正了简体中文原版的许多bug（包括耐力过大游戏崩溃、技能和队员等级上限、防具BTU错误、双持BTU、无限方尖塔钱和烈火爵士经验在内的重要bug都已修复，详见[§ 修复列表](#修复列表)），将大字体替换为了适当的字体，而且免CD带MP3背景音乐（MM6的背景音乐很好），虽然不如灰脸（GrayFace）补丁完美，但在目前灰脸魔法门6技术上暂时无法汉化的情况下是中文玩家最好的选择。

魔法门6中文完美升级补丁有简体、繁体两个版本，繁体的文字是在简体中文完美升级版基础上转换并替换了少许词汇而制成，其带有简体中文原版的中文语音。另外还有简体中文化补丁及繁体中文化补丁，可分别将任何其他语言的魔法门6转换成简体中文完美升级版和繁体中文完美升级版。

## 使用说明

<!-- [简体中文升级补丁 — zhfixsimp正常版.zip：]
请下载并解压“zhfixsimp_简体中文升级补丁”文件夹中的“zhfixsimp正常版.zip”压缩文件，把解压出来的zhfixsimp_installer文件夹放到mm6游戏目录下（也就是说：zhfixsimp_installer文件夹要和Anims和data文件夹、mm6.exe文件等在同一个目录下）。
然后执行 <mm6游戏目录>\zhfixsimp_installer\INSTALL.bat 文件即可安装本补丁。
原有的游戏文件请考虑自行备份，安装完补丁后可以自行删除zhfixsimp_installer文件夹。
（现在只是简单的补丁包和bat批处理文件，之后可能出更易用的exe）

[打过旧版的中文完美升级补丁，升级到最新版 — zhfixsimp-zhfixold2new已打过完美补丁现需升级.zip：]
请下载并解压“zhfixsimp_简体中文升级补丁”文件夹中的“zhfixsimp-zhfixold2new已打过完美补丁现需升级.zip”压缩文件，把解压出来的zhfixsimp_installer-zhfixold2new文件夹放到mm6游戏目录下。
然后执行 <mm6游戏目录>\zhfixsimp_installer-zhfixold2new\INSTALL.bat 文件即可安装本补丁。
原有的游戏文件请考虑自行备份，安装完补丁后可以自行删除zhfixsimp_installer-zhfixold2new文件夹。

[上述简体中文升级补丁的.bat文件用不了的，请用 — zhfixsimp-simplecopy简单复制替换.zip：]
请下载并解压“zhfixsimp_简体中文升级补丁”文件夹中的“zhfixsimp-simplecopy简单复制替换.zip”压缩文件，把解压出来的zhfixsimp_installer_simplecopy文件夹中的所有文件移动到mm6游戏目录下，替换所有原有文件即可。（zhfixsimp_installer_simplecopy文件夹不用移动，而是把它里面的文件移至mm6文件夹里面，比如mm6.exe会将原来的mm6.exe替换掉）
原有的游戏文件请考虑自行备份。

[安装后：]
如果mm6.exe不是以管理员权限运行的话，您必须设置为以管理员权限运行：右键点击mm6.exe->属性->“兼容性”选项卡->勾选“以管理员身份运行此程序”->确定。 -->

## 修复列表

### 非中文翻译问题修复列表

本补丁在繁体中文版的mm6.exe和Grayface补丁最新版的.blv、.odm（地图）和.evt（事件）文件基础上修改。由于繁体中文版魔法门6相当于英文官方1.1版，所以1.1版修复的bug本补丁也全都修复了。Grayface补丁最新版修复的地图和事件相关bug也都修复了。除此之外还有其他很多修复，其中有些是来自或借鉴1.2、Mok、GOG、UPlay版的。

方括号标签记录了每条修复是来自于谁（或受到谁的启发）：

* [1.1]：官方英文版v1.1补丁 / 繁体中文原版（相当于英文v1.1）
* [1.2]：官方英文版v1.2补丁
* [Mok1.3]：[Mok的非官方英文版v1.3补丁](https://telp.org/mm6/tavern/anyboard/posts/27430.html)
* [GOG]：[GOG版本](https://www.gog.com/game/might_and_magic_6_limited_edition)（英文）（相当于基于Mokv1.3版做了背景音乐MP3化的改动）
* [UPlay]：UPlay版本（英文）（相当于GOG版基础上修复了一个背景音乐播放的问题）
* [GrayFace]：[GrayFace非官方英文版补丁](https://grayface.github.io/mm/#GrayFace-MM6-Patch)最新版（v2.1）
* 没有标方括号：来自于本补丁自己的修复
* （Fenghou补丁和某繁体补丁在“中文翻译相关问题修复列表”之中提及）

修复列表：

* 烈火爵士的大厅中烈火爵士旁边的门打不开的bug修复。[1.1]
* 骑师（Horseman）的使驿站路程减两天（最短一天）的能力无效；海盗（Pirate）也无法使船程减两天（最短一天）；而水手（Sailor）不仅能完成本职任务——船程减两天，还能干骑师的活儿——驿站路程减两天；这些bug已经修复。[1.1]
* 一个角色受职业限制，本应无法学习一些技能，但是，在行会中学完了能学的技能之后，那么(1)在“请到其他地方寻求知识吧…”文字处（技能本应该显示的地方）乱点下，或者是(2)在文字栏的顶端电脑屏幕边缘处点一下，就能学会不能学的技能了。其中，(1)在1.1版中已经修复，本补丁自然也已修复；(2)在包括Grayface补丁和本补丁在内的任何版本都没修复。[1.1]
* 在行动指示灯熄灭状态下，角色依然可选，这时，魔法书已不像1.0版那样可以打开，然而依然存在可进行武器攻击的问题（此bug俗称“绝世大秘密”。GrayFace补丁通过使行动指示灯熄灭角色不可选定而有效地修复了此bug）。[1.1]
* 由于是基于繁体/v1.1版，F、J、W、E和merlin、rich、pesticide、seer等简体中文版独有的“秘籍”（其实是简体中文版没去除的调试码）自然也没有了。[1.1]
* 加里克的炼铁厂钥匙-如果需要钥匙的门被打开然后地下城被重置，门就再也打不开了；问题已被修复，如果门以前被打开过然后被重置，点击门的控制杆将会再次打开门。[1.1]
* 特威伦的放置小雕像任务-有的雕像和底座对应关系不正确，使得有时可能甚至无法完成任务，现已修复。[1.1]
* 如果你丢失了虚空仪式书，先知不会把它还给你，现已修复。[1.1]
* 修复烈火爵士无限经验值bug。[1.1]
* 修复方尖碑无限金币bug。[1.1]
* 不会出现多个谢勒尔（海神庙解救谢勒尔任务）。[1.1]
* 祭司和大祭司升职任务问题修复。[1.1]
* 学习术、锤棍和棍棒技能的bug已得到纠正。[1.1]
* 学习术技能的右键文本现已正确。[1.1]
* 天赋魔力、点物成金、分享生命、群星飞落、流星火雨和末日审判魔法的问题已得到纠正。[1.1]
* 天赋魔力和点物成金魔法卷轴的一个bug已得到修复。[1.1]
* 自动记录中记忆水晶的地点有误，现已修改正确。[1.1]
* 自动记录中温斯特·舒则位置有误，现已修改正确。[1.1]
* 第三只眼任务完成后也不会从你的任务日志中去除的问题已修复。[1.1]
* 修复技能点数超过60时会出现的bug。[1.1]
* 修复耐力大于或等于400时，被敌方有效攻击就会跳出游戏的bug。[1.1]
* “强力类/力量类/of Force”附加属性物品现在正常了（NWC声称也修复了“恢复类/康复类/of Recovery”，但实际上仍有问题，这个问题在Grayface补丁中修复了，本补丁未修复）。[1.1]
* 一些界面问题（部分甚至会导致游戏意外退出）已得到修复。[1.1]
* 修正了一些文本和图形的小错误。[1.1]
* 不再需要运行Cyrix帮助程序（686_p.exe或cpuiden.exe）以使MMVI在Cyrix系统上运行。[1.1]
* 阿尔伯特·牛顿爵士现在可以正确地接受时间沙漏了。[1.2]
* 更新了某些技能和魔法的功能的描述，使其更加清楚。[1.2]
* 修复阴影教和克里格斯城堡中有问题的门。[Mok1.3]
* 仅带着伊普斯隆记忆水晶而无其他记忆水晶，点击神使的记忆水晶神坛会使游戏崩溃跳出（少数时候出现，并非只拿着伊普斯隆都会出现），已修正，不过有个小问题：伊普斯隆水晶不会从行囊中去除，但至少已不影响正常游戏。[Mok1.3]
* 修复防具恢复时间错误bug：防具会增加攻击恢复时间，具体是（单位：BTU）：盾牌、皮甲：普通10，专家5，大师0；锁甲：普通20，专家10，大师0；钢甲：普通30，专家15，大师0。然而在游戏中，火系魔法的技能等级被当成钢甲的技能等级来修正攻击恢复时间，钢甲修正锁甲，锁甲修正皮甲，皮甲修正盾牌。[Mok1.3]
* 使用Music文件夹中的.mp3文件作为背景音乐播放，免CD。[GOG][UPlay]
* （GOG版如果没有光驱的话就不会播放mp3背景音乐，UPlay版修复了这个问题，本补丁使用了UPlay版的方法，因而也修复了该问题。不过GOG/UPlay版的背景音乐播放不完美，和原版稍有差异，差异包括：主界面上播放13.mp3是从头开始播，应该从18秒处开始播；进入民居时背景音乐停止，出来后从头播放，应该继续播放。GrayFace补丁和原版一致。本补丁和GOG/UPlay版一样）
* 使用Miles音响系统4.0g和Smacker 3.1s。[GOG]
* 布特拉格湾马戏团部分入口的bug修复。[GrayFace]
* 自由天堂的走私者行会进入不了的bug修复。[GrayFace]
* 修复了所有室外地图（仅天堂谷正常）上地下城和房屋鼠标悬停无提示的问题。[GrayFace]
* 天堂谷（outa2）的喷泉枯竭时显示“临时加100能量”而不是“令人振奋！”的问题修复。[GrayFace]
* 布莱克郡和克里格斯的喷泉（一个+5智力和个性，另一个+10魔法抗性）用了相同的“已使用”变量，饮用了一个后就不能喝另一个了，现已修复。[GrayFace]
* 克里格斯（outb1）：克里格斯城堡顶上的一扇门对鼠标没有反应的问题修复。[GrayFace]
* 进入顶级羊鸣庙时，队伍会面向错误的方向的bug修复。[GrayFace]
* 布莱克郡（outb2）：小雕像任务房子附近有浮起的树，现已修复。[GrayFace]
* 进入狼穴时，队伍会面向错误的方向的bug修复。[GrayFace]
* 烈火爵士的大厅（d04）：如果触发陷阱，则无法打开某上锁的箱子；还有一个箱子的前部不可点击；这些问题均已修复。[GrayFace]
* 龙骑兵岩洞（d06）：任务物件所在的箱子现已完善：原本如果箱子打开时触发了爆炸陷阱，则无法获得其中一个任务物件；在获得任务物品后，箱子会重复。[GrayFace]
* 斯纳格的铁矿（d09）：一个柜子的前部（事件77）无法点击的问题已修复。[GrayFace]
* 龙骑兵堡垒（d10）：重复的箱子和无法打开的柜子现已正常；莫德里德匕首所在的箱子现已完善。[GrayFace]
* 考勒根的豪宅（d11）：任务物件所在的箱子现已完善。[GrayFace]
* 军阀堡垒（d16）：修复了重复的箱子；任务物件所在的箱子现已完善。[GrayFace]
* 阿加的实验室（d19）：修复了重复的箱子；原本最后一个箱子为空，这是bug，已修复。[GrayFace]
* 羊鸣庙（t1）：地板贴图错位的问题修正。[GrayFace]
* 月亮庙（t5）：一个祭坛不会增加最后一个角色的力量值（如果低于50的话），另一个祭坛给第一个角色+2运气而不是+5，现均已修复。[GrayFace]
* 顶级羊鸣庙（t7）：修复了重复的箱子。[GrayFace]
* 自由天堂的下水道（sewer.blv）：老鼠会在墙内出现；一个箱子的顶部无法点击；从理查德·哈普房屋进入下水道后从同一出入口会从另一所房子出来；现均已修复。[GrayFace]
* 恩洛斯神使（oracle.blv）：神使处的带星星的屏幕经常关闭而不是打开的问题已修复。[GrayFace]
* New World Computing（znwc）：某扇门仅部分移动的问题已修复。[GrayFace]
* 在发放金字塔和酒桶时，马戏团会取消所有奖杯的问题修复。[GrayFace]
* 如果再次和斯里克·席尔瓦托恩交谈，羊鸣披风会被多次给予的bug修复。[GrayFace]
* 双手武器的恢复时间bug修复（计算总恢复时间时不错误地额外再加上左手武器时间）。[GrayFace]
* 无需在Win XP系统上设置兼容性。[GrayFace]
* 默认平滑转身，使得转身不会过快（添加默认turndelta值）。[GrayFace]
* 自动切换到16位色，使得游戏可以窗口化。[GrayFace]
* 首次游戏时不强制看完片头动画，退出（Esc）键即可跳过动画。
* 默认总是奔跑、离开房屋时不转身。
* 简易的键位更改工具mm6chupchangekey.exe，可改用WSAD方向键。
* 修正幽灵沼泽黑摩尔镇某些民居的入口错误：有两处都可以进入坟墓之书任务给予者罗斯的房屋，其中有一处明显本应是进入另一个屋子，已改；此外，有至少三个房屋有门但进不去，或许是错误，但不清楚原定应该使用哪个屋子，所以这个没改。
* 阿拉莫斯城堡（cd1）记忆水晶处可以将队伍传送到地下城外的传送器无法使用，以及记忆水晶和传送器鼠标悬停标签错误的bug修复。
* 羊鸣庙大厅中央四个门的谜题，无人能通过成功解答谜语来开门，都是试错来开门的，很可能是是制作者搞错了，现更改四个标牌的位置，使得谜题有合理的解释（开门顺序依然不变）。
* NPC头像没有加框的加框。
* 加入罗兰德写给凯瑟琳的5封信和3DO官方文章《寂静》的中文翻译版txt文件，以及MM6官方英文版说明书和快速上手指引。

### 中文翻译相关问题修复列表

以下“已检查完成的文件”，几乎每条文字都检查过了，必要时修改甚至重新翻译。有些借鉴了Fenghou的MM6翻译修正补丁、MM6繁体官方版翻译、某MM6繁体非官方补丁以及MM7、8的简体中文版翻译。然后融合进了[MM678 I18N（魔法门678语言包）](https://might-and-magic.github.io/mm678-i18n/zh/)项目，统一了魔法门6、7、8的翻译，再将魔法门6的部分分离出来，用在本补丁里。

总体上遵循简体中文官方版本魔法门6、7译名，除部分常见名词，包括：Knight/剑客->骑士；Druid/教士/僧侣->德鲁伊；Paladin/游侠->圣武士；Priest/神父->神甫；Staff/棍棒/长棍->手杖；Mace/锤棍->钉锤；等等。除少数（如魔法）外，英文相同者通常中文名均统一（如职业、生物的Lich都是巫妖；职业、6中生物、7剧情中尼根的团体Warlock都是邪术师）。

专有名词可查阅魔法门6、7、8和整合版的简体、繁体、英文所有版本的所有专有名词对照表：[mm678allzhversiontrans.xlsx Excel文件下载](https://github.com/might-and-magic/mm678-i18n/raw/master/translation-reference/zh/mm678allzhversiontrans.xlsx)，也可以参考一下在合并入MM678 I18N项目之前的旧的[zhfix翻译类修正记录.xlsx](https://github.com/might-and-magic/mm6chup/raw/master/notes/zhfix%E7%BF%BB%E8%AF%91%E7%B1%BB%E4%BF%AE%E6%AD%A3%E8%AE%B0%E5%BD%95.xlsx)。

繁体由简体使用[OpenCC](https://github.com/BYVoid/OpenCC)转化，游戏专有名词目前均为简体版本的称呼，除了Free Haven（整合版简体依然使用玩家已习惯的简体原版六代“自由天堂”的译名）和大陆的名字换成了繁体版本惯用名称。

细节不一一详述，其他值得一提的翻译修改在下面叙述。

<details><summary><i>已检查和未检查完成的文件列表（点击展开/隐藏）</i></summary>
已检查完成的文件：

* *.str
* MONSTERS.TXT
* SPCITEMS.TXT
* STDITEMS.TXT
* MapStats.txt
* Class.txt
* GLOBAL.TXT
* USEITEMS.TXT
* npcbtb.txt
* Merchant.txt
* Awards.txt
* stats.txt
* Trans.txt
* SKILLDES.TXT
* Scroll.txt
* npcnames.txt

部分检查但可能未完成的文件：

* Spells.txt
* Autonote.txt
* Quests.txt
* npcprof.txt
* 2DEvents.txt
* NPCdata.txt
* items.txt
* npctopic.txt
* npctext.txt
* PROFTEXT.txt
* NPCNews.txt
</details>

修复列表：

* 替换简体和繁体版的字体。
* 因为只用了繁体版的mm6.exe，所以繁体阿拉莫斯城堡密码无法输入和树上的提示显示错误的bug不存在。该bug涉及换行问题，在修正重译时换行问题已加以注意。
* 因为用了繁体版的mm6.exe，所以存在繁体版中文字换行处理bug（文中每出现一个换行，文末就会少掉1个半角字符或0.5个全角字符），该bug已通过在相关.txt文件中加入文本结束字符解决。
* 简体中文版身无长技的小丑雇佣要花10000金币，已修复为正常的10金币。（不过夜盗（Burglar）说他们不会花你一文钱，实际上是骗人的：雇佣要2000，拿20%，这个看上去是故意设定的，因此包括Grayface补丁和本补丁在内的任何版本都没修改）
* 阴影教（D08）的四个秘密远距离传送器谜题，现在既可以输入常用中文答案，也可以输入英文答案了（非常用中文答案被去除），避免没有或无法切换简体中文输入法而不能使用传送器。
* 方尖塔谜题和阿拉莫斯城堡谜题的押韵重译。
* 时空之门的恩洛斯地图中文化。
* 转身速度设置图上的文字。
* 在独立碑（D13）中，右键按住右上角的小地图察看当前地图名称，显示银舵堡垒的bug修复。

想查看、参与翻译，请[点这里下载简体中文的.po文件](https://github.com/might-and-magic/mm678-i18n/raw/master/3_i18n/zh_CN/LC_MESSAGES/mm678.po)，.po可用[Poedit编辑器](https://poedit.net/)查看和编辑。

## 技术

MM6chup.dll文件源码见[mm6chup-dll](https://github.com/might-and-magic/mm6chup-dll)项目。键位更改工具mm6chupchangekey.exe文件源码见[mm6chupchangekey](https://github.com/might-and-magic/mm6chupchangekey)项目。翻译文件处理参见[MM678 I18N（魔法门678语言包）项目说明的“技术”段落](https://might-and-magic.github.io/mm678-i18n/zh/#%E6%8A%80%E6%9C%AF)。

为了修正繁体版中文字换行处理问题，Autonote、Class、ITEMS、npcprof、Quests、Scroll、SKILLDES、Spells、stats.txt中加入了一些文本结束字符（End-of-Text character，ETX，16进制值：03），因此，假如想修改这些文件，请不要直接编辑他们，请使用源文件中的工具对其进行正常版本和带ETX版本之间的转换。

本补丁的版本号从v1.5.0.0算起。

## 计划

未来没有继续修正的计划，除非：1、如果技术上允许，会汉化GrayFace补丁的魔法门6（现在已将GrayFace补丁的魔法门8和魔法门678整合版汉化，但GrayFace补丁的魔法门6和7还没有汉化成功）；2、如有中文翻译相关的问题，会在[MM678 I18N（魔法门678语言包）](https://might-and-magic.github.io/mm678-i18n/zh/)项目中修改后自动生成本魔法门6补丁。

## 更新日志

* （约2016-2017年：开始制作）
* v1.5.0.0 [2018-12-23]：计划中的非翻译类修正几乎已经修复完毕，翻译文字的一小部分（*.str、MONSTERS.TXT、SPCITEMS.TXT、STDITEMS.TXT、MapStats.txt、Class.txt、GLOBAL.TXT、USEITEMS.TXT）已检查完毕；现仅有简体补丁，无繁体，无中文化（英转中）补丁；只是简单的文件包需要解压覆盖，之后会做补丁文件（bat或exe）
* v1.5.0.1 [2018-12-24]：键位从WSAD改回原版（玩家依然可执行changekey_wsad.bat改成WSAD键位，WSAD键位的具体说明在changekey_README.txt中的“范例：WSAD键位”章节）；加入罗兰德写给凯瑟琳的5封信和3DO官方文章《寂静》的中文翻译版txt文件，以及MM6官方英文版说明书和快速上手指引；方尖塔谜题小修改；bat补丁文件制作
* v1.5.0.2 [2018-12-24]：简体中文化补丁和简体中文无动画版转完整版补丁
* v1.5.0.3 [2018-12-26]：npcbtb.txt、Merchant.txt、Awards.txt、stats.txt、Trans.txt、SKILLDES.TXT、Scroll.txt文件检查完毕，Spells.txt部分检查完毕
* v1.5.0.4 [2019-01-09]：Quests.txt、Autonote.txt文件检查完毕，包括烈火爵士任务、Karigor、某某liquid/brew、Temple Gong、harpy feather等可交换特殊物品的文字修复
* v1.5.0.5 [2019-01-16]：修正了少数时候仅持伊普斯隆而无其他记忆水晶点击神使的记忆水晶神坛会使游戏崩溃跳出的问题；修正了中文化补丁未安装中文语音的问题
* v1.5.1.0 [2020-11-正在制作]：使用MM678 I18N项目的翻译；加入繁体版本

## 版权许可

《魔法门6：天堂之令》是由New World Computing公司制作，其母公司3DO发布并持有版权和商标权的电子游戏，在前述公司停止运营后，现该游戏的所有权已转让予育碧娱乐公司。本补丁不提供游戏主要文件的下载，旨在修复已不再提供官方支持的版权作品、提升该版权作品的可用度，其符合非营利、教育、学习、研究、欣赏的目的，也绝不会对版权作品的潜在市场或价值产生任何负面影响，可在各国各地《著作权法》中有关“合理使用”（fair use）的条款下进行使用。
